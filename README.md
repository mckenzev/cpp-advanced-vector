# Advanced Vector

Данный проект содержит полную реализацию динамического массива `Vector<T>`, аналогичного `std::vector`, включая управление сырой памятью, безопасные перемещения/копирования элементов и поддержку всех основных операций контейнера.

Реализация минималистичная, но полностью безопасная и корректная: ни одна операция не вызывает UB, корректно работает при исключениях, а перемещения и копирования выполняются с учётом noexcept-гарантий типов.

## Возможности

### Основные возможности Vector\<T\>:

* Управление памятью без стандартного аллокатора (через `RawMemory<T>`):
  * выделение/освобождение *сырой* памяти (`operator new` / `operator delete`);
  * инициализация объектов на сырой памяти (`std::construct_at`);
  * явное разрушение (`std::destroy`).

* Полная реализация обычных возможностей динамического массива:
  * `PushBack`, `PopBack`;
  * `Emplace`, `EmplaceBack`;
  * `Insert`, `Erase`;
  * `Resize`, `Reserve`.

* Конструкторы:
  * по размеру;
  * от диапазона;
  * от `initializer_list`;
  * копирования/перемещения.

* Итераторы совместимы со стандартными алгоритмами.

* Поддержка exception safety:
  * строгая гарантия безопасного состояния после исключений;
  * корректная работа, если пользовательский тип выбрасывает исключение в конструкторе или копировании.

* Применение методов оптимизации:
  * если T nothrow-move-constructible — используется перемещение;
  * иначе — копирование.

### Особенности RawMemory\<T\>:

Это вспомогательный класс, который отвечает только за:

* выделение массива *неинициализированной* памяти T[n];
* хранение ёмкости;
* выдачу указателя;
* освобождение памяти.

Он не создаёт и не разрушает объекты — всё это происходит внутри `Vector`.

---

# Структура проекта

```
vector.h        # Реализация Vector<T> и RawMemory<T>
main.cpp        # Набор тестов и запуск
```

---

# Тесты

Проект содержит большой набор тестов, проверяющих:

* корректность Size/Capacity;
* корректность работы копирующего и перемещающего конструктора;
* поддержку Insert/Erase/Emplace при различных условиях (в том числе при перераспределении памяти);
* исключения в конструкторах копирования/значений;
* корректное перемещение и копирование большого числа объектов;
* отсутствие утечек (проверяется счётчиками конструкторов/деструкторов);

Тесты достаточно строгие и моделируют реальные случаи.

---

# Пример использования

```cpp
#include <iostream>

#include "vector.h"

int main() {
    Vector<int> v(3);
    for (size_t i = 0; i < v.Size(); ++i) {
        v[i] = i + 1;
    }

    v.PushBack(10);   // автоматическое увеличение Capacity
    v.Insert(v.begin(), 0);
    v.EmplaceBack(42);

    for (int x : v) {
        std::cout << x << " ";
    }
}
```

Вывод:

```bash
0 1 2 3 10 42
```

---

# Детали реализации

### Реаллокация

При нехватке места:

* выделяется новая память (x2 от Capacity)
* элементы перемещаются или копируются в новую область
* старая память освобождается

### Emplace/Insert

* если вставка происходит в конец — просто создаётся новый объект;
* если в середину:
  * сдвигаются элементы с учётом noexcept-move/copy;
  * создаётся временный объект с аргументами и затем вставляется на позицию.

### Exception Safety

Гарантируется:

* отсутствие «висячих» объектов после неудачных операций;
* отсутствие утечек памяти;
* если операция не выполнилась — состояние вектора остаётся прежним.

---

# Benchmark

В проекте есть сравнение операций Insert и PushBack для:

* стандартного std::vector
* самописного Vector<T>

Счётчики операций (copy/move ctor, assign, destructor) позволяют проанализировать эффективность.

---

# Вывод

Этот проект реализует:
* полноценный динамический массив без стандартного аллокатора;
* безопасное, корректное управление объектами и памятью;
* эффективные операции вставки/удаления;
* высокое соответствие поведению std::vector.
